function show(e){e.hidden=!1}function hide(e){e.hidden=!0}function showAlert(e="success",o="Ação realizada com sucesso!"){const t=document.getElementById("alertGlobal");t&&(t.classList.remove("alert--success","alert--error"),t.classList.add("error"===e?"alert--error":"alert--success"),t.textContent=o,show(t),t.scrollIntoView({behavior:"smooth",block:"start"}))}let toastTimeout;function showToast(e="Tudo certo! ✅",o=3e3){const t=document.getElementById("toast");t&&(t.textContent=e,show(t),t.offsetWidth,t.classList.add("show"),clearTimeout(toastTimeout),toastTimeout=setTimeout((()=>{t.classList.remove("show"),setTimeout((()=>hide(t)),250)}),o))}function getFormularioTemplate(){return'\n    <h2>Cadastre-se e jogue junto com a gente!</h2>\n    <p>\n      Faça parte da <strong>Study&Play</strong> e contribua para levar o aprendizado através dos jogos a mais pessoas.\n      Preencha o formulário abaixo para se cadastrar como voluntário, doador ou participante.\n    </p>\n\n    \x3c!-- Alertas --\x3e\n    <div id="alertGlobal" class="alert alert--success" role="alert" hidden>\n      ✅ Cadastro enviado com sucesso!\n    </div>\n\n    <form id="formCadastro">\n      <fieldset>\n        <legend>Informações Pessoais</legend>\n\n        <label for="nomeCompleto">Nome Completo:</label>\n        <input type="text" id="nomeCompleto" name="nomeCompleto" required placeholder="Ex: Ana Lu">\n\n        <label for="email">E-mail:</label>\n        <input type="email" id="email" name="email" required placeholder="Ex: analu@dominio.com">\n\n        <label for="cpf">CPF:</label>\n        <input type="text" id="cpf" name="cpf" required placeholder="000.000.000-00">\n\n        <label for="telefone">Telefone:</label>\n        <input type="tel" id="telefone" name="telefone" required placeholder="(00) 00000-0000">\n\n        <label for="nascimento">Data de Nascimento:</label>\n        <input type="date" id="nascimento" name="nascimento" required>\n      </fieldset>\n\n      <fieldset>\n        <legend>Endereço</legend>\n\n        <label for="endereco">Endereço:</label>\n        <input type="text" id="endereco" name="endereco" required placeholder="Rua Exemplo, 123">\n\n        <label for="cep">CEP:</label>\n        <input type="text" id="cep" name="cep" required placeholder="00000-000">\n\n        <label for="cidade">Cidade:</label>\n        <input type="text" id="cidade" name="cidade" required>\n\n        <label for="estado">Estado:</label>\n        <input type="text" id="estado" name="estado" required maxlength="2" placeholder="SP">\n      </fieldset>\n\n      <fieldset>\n        <legend>Participação</legend>\n        <label for="tipoParticipacao">Como você gostaria de participar?</label>\n        <select id="tipoParticipacao" name="tipoParticipacao" required>\n          <option value="">Selecione uma opção</option>\n          <option value="voluntario">Voluntário</option>\n          <option value="doador">Doador</option>\n          <option value="participante">Participante dos projetos</option>\n        </select>\n      </fieldset>\n\n      <button id="submitButton" type="submit">Enviar Cadastro</button>\n    </form>\n\n    <p id="mensagemRetorno"></p>\n  '}function ensureFormRendered(){if(document.getElementById("formCadastro"))return;const e=document.getElementById("conteudoPrincipal")||document.querySelector("main");e&&(e.innerHTML=getFormularioTemplate())}let modalEventsBound=!1;function openModal(e="visitante"){const o=document.getElementById("confirmModal"),t=document.getElementById("modalBackdrop"),n=document.getElementById("modalNome");o&&t&&(n&&(n.textContent=e),show(t),show(o),t.classList.add("open"),o.classList.add("open"),o.setAttribute("tabindex","-1"),o.focus())}function closeModal(){const e=document.getElementById("confirmModal"),o=document.getElementById("modalBackdrop");e&&o&&(o.classList.remove("open"),e.classList.remove("open"),setTimeout((()=>{hide(o),hide(e)}),200))}function bindModalOnce(){if(modalEventsBound)return;document.getElementById("confirmModal");const e=document.getElementById("modalBackdrop"),o=document.getElementById("modalClose");document.addEventListener("keydown",(e=>{"Escape"===e.key&&closeModal()})),e?.addEventListener("click",closeModal),o?.addEventListener("click",closeModal),modalEventsBound=!0}function validarCampo(e){return limparErro(e),e.validity.valueMissing?(mostrarErro(e,"Este campo é obrigatório."),!1):"email"!==e.type||e.value.includes("@")?"cpf"===e.id&&e.value.replace(/\D/g,"").length<11?(mostrarErro(e,"CPF incompleto."),!1):!("telefone"===e.id&&e.value.replace(/\D/g,"").length<10)||(mostrarErro(e,"Telefone incompleto."),!1):(mostrarErro(e,"Digite um e-mail válido (ex: usuario@dominio.com)."),!1)}function mostrarErro(e,o){e.classList.add("input-error");const t=document.createElement("div");t.className="error-message",t.textContent=o,e.insertAdjacentElement("afterend",t)}function limparErro(e){e.classList.remove("input-error");const o=e.nextElementSibling;o&&o.classList.contains("error-message")&&o.remove()}function aplicarMascaras(){"undefined"!=typeof $&&void 0!==$.fn.mask&&($("#cpf").mask("000.000.000-00"),$("#telefone").mask("(00) 00000-0000"),$("#cep").mask("00000-000"))}let formEventsBound=!1;function bindFormulario(){if(formEventsBound)return;const e=document.getElementById("formCadastro");if(!e)return;const o=e.querySelectorAll("input[required], select[required]");o.forEach((e=>{e.addEventListener("blur",(()=>validarCampo(e))),e.addEventListener("input",(()=>limparErro(e)))})),e.addEventListener("submit",(t=>{t.preventDefault();let n=!0;if(o.forEach((e=>{validarCampo(e)||(n=!1)})),!n)return showAlert("error","Por favor, corrija os campos destacados."),void showToast("Existem campos inválidos ⚠️");const a=(document.getElementById("nomeCompleto")?.value||"visitante").trim();showAlert("success","Cadastro enviado com sucesso!"),showToast("Cadastro registrado! ✅"),openModal(a),e.reset()})),formEventsBound=!0}document.addEventListener("DOMContentLoaded",(()=>{ensureFormRendered(),bindModalOnce(),aplicarMascaras(),bindFormulario()}));